paths:
  # Security: Only allow access to these root directories (for Web UI and LocalProvider)
  allowed_roots:
  #  - "D:/Code/gemini/feather_trace/data"
    - "Y:/1按年份/2026"
    
  # Deprecated: raw_dir (use sources below)
  # raw_dir: "data/raw" 
  
  sources:
  #  - path: "data/raw"
    - path: "Y:/1按年份/2026"
      recursive: true
      enabled: true
      # Optional: Regex pattern to extract metadata from folder structure
      # Named groups supported: (?P<date>...), (?P<location>...)
      # Example: "(?P<date>\\d{8})_(?P<location>.*)" matches "20231020_Park"
      # If omitted, default guessing logic (YYYYMMDD_Location) is used.
      structure_pattern: "(?P<date>\\d{8})(?P<location>.*)" 

  # Output Configuration
  output:
    # Root directory for all processed files
    root_dir: "data/processed"
    
    # Naming Template
    # Variables: {date}, {year}, {month}, {day}, {location}, {species_cn}, {species_sci}, {confidence}, {filename}
    # Special Variable: {source_structure} -> Replicates the relative folder path from source
    # Example 1 (Flat): "{date}_{location}_{species_cn}_{confidence}"
    # Example 2 (Tree): "{year}/{location}/{species_cn}/{filename}"
    # Example 3 (Mirror): "{source_structure}/{filename}"
    structure_template: "{source_structure}/{filename}_{species_cn}_{confidence}"
    
    # Whether to write identified metadata back to the SOURCE file (Original)
    # WARNING: This modifies your raw data!
    write_back_to_source: false

  # Deprecated but kept for compatibility during migration
  processed_dir: "data/processed"
  
  db_path: "data/db/feathertrace.db"
  ioc_list_path: "data/references/Multiling IOC 15.1_d.xlsx"
  china_list: "config/dictionaries/china_bird_list.txt"
  foreign_list: "config/dictionaries/foreign_countries.txt"
  model_cache_dir: "data/models"

processing:
  device: "cuda" # options: cpu, cuda, auto
  yolo_model: "yolov8n.pt"
  confidence_threshold: 0.5
  blur_threshold: 40.0
  target_size: 640
  crop_padding: 200

recognition:
  mode: "local" # options: local, api, dongniao
  region_filter: "auto"  # options: null (world), "china", "auto"
  top_k: 5
  alternatives_threshold: 70 # If top match confidence > this, don't show alternatives
  low_confidence_threshold: 60 # If top match confidence < this, mark as "Uncertain"
  
  # BioCLIP Local Configuration
  local:
    model_type: "bioclip-2" # options: "bioclip", "bioclip-2"
    batch_size: 512 # Text encoding batch size (large is fine)
    inference_batch_size: 16 # Image inference batch size (adjust based on VRAM, 16-32 recommended)
  
  # BioCLIP API Configuration (HuggingFace)
  api:
    url: "https://router.huggingface.co/models/imageomics/bioclip" #not provided yet, please do not use it now
    key: "" # Overridden by secrets.yaml
  
  # Dongniao API Configuration
  dongniao:
    url: "https://ai.open.hhodata.com/api/v2/dongniao"
    key: "" # Overridden by secrets.yaml

web:
  host: "0.0.0.0"
  port: 8000
